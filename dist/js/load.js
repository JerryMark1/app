define(["jquery"],function(e){return commonObj={ajaxstatus:!0,pagesize:5,winH:$(window).height(),loadCanvas:function(){var e=$(".product").find("canvas").length;e>0&&$(".product").find("canvas").each(function(){var e=$(this).data("src"),n=new Image;n.canvs=$(this)[0];var s=n.canvs.getContext("2d");s&&(n.onload=function(){n.canvs.width=this.width,n.canvs.height=this.height,s.drawImage(this,0,0),$(n.canvs).css("background-image","none")},n.src=e)})},getData:function(e){$.ajax({type:"get",url:"dist/test.json",data:{page:commonObj.pagenumber,row:commonObj.pagesize},dataType:"json",success:function(e){$(".loaddiv").hide(),e.length>0?(commonObj.ajaxstatus=!0,commonObj.insertDiv(e),commonObj.loadCanvas()):$("#pagenumlength").val("0")},beforeSend:function(){$(".loaddiv").show()},error:function(){$(".loaddiv").hide()}})},insertDiv:function(e){var n=$("#scrollAdd"),s="",a=5;e.length<5&&(a=e.length);for(var i=0;a>i;i++)s+='<li><a href="#"><div class="triangle-topleft"></div><span class="shuxing" data_url="productinfo.html">专属</span><div class="leftimages fl"><canvas data-src="images/product/product1.png" ></canvas></div><div class="productcontent fr"><p class="ptitle pl10">广联达变更算量</p><p class="pdes pl10">简介这里简介这里简介这里简介这里简介这里简介这里简介这里简介介这里简介</p><p class="pprice pl10">价格：<span class="green">￥5000</span></p></div></a></li>';n.append(s)},scrollHandler:function(){var e=$(document).height(),n=$(window).scrollTop(),s=$(window).height();if(parseInt(n)+parseInt(s)+50>=parseInt(e)&&commonObj.ajaxstatus){if("1"!=$("#pagenumlength").val())return;commonObj.ajaxstatus=!1,commonObj.currentpage++,commonObj.getData(commonObj.currentpage)}},addnums:function(){var e=parseInt($(this).prev().val());isNaN(e)?e=1:1>e?e=1:e+=1,$(this).prev().val(e)},reducenums:function(){var e=parseInt($(this).next().val());isNaN(e)?e=1:1>e?e=1:e-=1,$(this).next().val(e)},address_huitian:function(){var e=$(this).parents("li").find(".name").text(),n=$(this).parents("li").find(".phone").text(),s=$(this).parents("li").find(".all-address").html(),a=s.split("&nbsp;");console.log(a);var i=a[0],t=a[1],o=a[2],r=a[3];$("#consignee").val(e),$("#s1").val(i),$("#s1").trigger("change"),$("#s2").val(t),$("#s2").trigger("change"),$("#s3").val(o),$("#address").val(r),$("#phone_mob").val(n)},addAddresslist:function(){var e=$("#consignee").val(),n=$("#phone_mob").val(),s=$("#s1").val(),a=$("#s2").val(),i=$("#s3").val(),t=$("#address").val(),o='<li><p><em class="name">'+e+'</em>(<em class="phone">'+n+'</em>)</p> <p class="all-address">'+s+"&nbsp;"+a+"&nbsp;"+i+"&nbsp;"+t+'</p><p class="new_line"><br></p><p class="address_action"><span class="edit"><a href="#"><i class="edit_icon"></i>编辑</a></span><span><a href="#" class="delete float_none"><i class="delete_icon"></i>删除</a></span></p></li>';""!=$.trim(e)&&""!=$.trim(n)&&""!=$.trim(s)&&""!=$.trim(t)&&($("#addresslist").append(o),commonObj.clearAddress())},clearAddress:function(){$("#consignee").val(""),$("#phone_mob").val(""),$("#s1").val(""),$("#s2").val(""),$("#s3").val(""),$("#address").val("")},loginin:function(){var e=$("#login_userName").val(),n=$("#login_Password").val(),s=!0;if(""==$.trim(e))return $("#login_userName").next("s").css({display:"inline-block"}),s=!1,!1;var a=/^1[3|4|5|7|8]\d{9}$/;return a.test(e)?($("#login_userName").next("s").hide(),""==$.trim(n)?($("#login_Password").next("s").css({display:"inline-block"}),s=!1,!1):($("#login_Password").next("s").hide(),void(s&&$.ajax({type:"post",url:"login.php",data:{phone:e,pwd:n},success:function(e){"1"==e?window.location.href="index.html":alert("登录失败")}})))):($("#login_userName").next("s").css({display:"inline-block"}),s=!1,!1)},register:function(){var e=!0,n=$("#login_userName").val(),s=$("#login_Password").val(),a=$("#login_Passwordn").val(),i=$("#login_email").val();if(""==$.trim(n))return $("#login_userName").next().show().children(".errorE").show().siblings("em").hide(),e=!1,!1;var t=/^1[3|4|5|7|8]\d{9}$/;if(!t.test(n))return $("#login_userName").next().show().children(".errorM").show().siblings("em").hide(),e=!1,!1;if($("#login_userName").next().hide(),$.ajax({type:"post",url:"login2.php",data:"phone="+n,success:function(n){return"1"==n?($("#login_userName").next().show().children(".isu").show().siblings("em").hide(),e=!1,!1):void 0}}),""==$.trim(s))return $("#login_Password").next().show().children(".errorE").show().siblings("em").hide(),e=!1,!1;if(!(s.length>=3))return $("#login_Password").next().show().children(".errorM").show().siblings("em").hide(),e=!1,!1;if($("#login_Password").next().hide(),""==$.trim(a))return $("#login_Passwordn").next().show().children(".errorE").show().siblings("em").hide(),e=!1,!1;if(s!=a)return $("#login_Passwordn").next().show().children(".errorM").show().siblings("em").hide(),e=!1,!1;if($("#login_Passwordn").next().hide(),""==$.trim(i))return $("#login_email").next().show().children(".errorE").show().siblings("em").hide(),e=!1,!1;var t=/^[a-zA-Z0-9._%+-]+@(?!.*\.\..*)[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return t.test(i)?($("#login_email").next().hide(),void(e&&$.ajax({type:"post",url:"register.php",data:{phonenumber:n,pwd:s,email:i},success:function(e){"1"==e?window.location.href="login.html":console.log(0)}}))):($("#login_email").next().show().children(".errorM").show().siblings("em").hide(),e=!1,!1)},addcatAnimate:function(){var e=Number($("#cartnumbers").val()),n=$("#productimg"),s=n.offset().left+30,a=n.offset().top-10,i=n.children("img").attr("src"),t=$(".nav2").offset().left,o=$(".nav2").offset().top;$("#flydiv").length<=0&&$("body").append('<div id="flydiv"><img src="'+i+'" width="50" height="50" /></div');var r=$("#flydiv");r.css({left:s,top:a}).animate({left:t,top:o-80},500,function(){r.stop(!1,!1).animate({left:t,top:o-20,opacity:0},500,function(){r.fadeOut(300,function(){r.remove();var n=Number($(".cartnums").text());$(".cartnums").text(n+e),$(".cartnums").show()})})})}}});